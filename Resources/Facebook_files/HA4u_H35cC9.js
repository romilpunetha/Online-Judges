/*!CK:420733842!*//*1452526156,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["d7Drq"]); }

__d('BasePrivacyWidget', ['Arbiter', 'ArbiterMixin', 'DOM', 'Form', 'PrivacyConst'], function a(b, c, d, e, f, g, h, i, j, k, l) { if (c.__markCompiled) c.__markCompiled(); var m = l.BaseValue; function n() { } Object.assign(n.prototype, i, { init: function (o, p, q, r) { this._controllerId = p; this._root = o; this._options = Object.assign(r || {}, q); this._formDataKey = 'privacy_data'; }, getData: function () { return this._model.getData(); }, _getPrivacyData: function (o) { o = o || this._fbid; var p = {}; p[o] = this.getData(); return p; }, getRoot: function () { return this._root; }, _initMenu: function (o) { this._menu = o; this._menu.subscribe('itemclick', this._onMenuSelect.bind(this)); }, _isCustomSetting: function (o) { return o == m.CUSTOM; }, _isEveryoneSetting: function (o) { return o == m.EVERYONE; }, _updateSelector: function (o) { var p = this._model.value; if (!this._isCustomSetting(p)) { this._onPrivacyChanged(); return; } }, _onPrivacyChanged: function () { this._saveFormData(); h.inform('Form/change', { node: this.getRoot() }); this.inform('privacyChanged', this.getData()); h.inform('UIPrivacyWidget/globalPrivacyChanged', { fbid: this._fbid, data: this.getData() }); }, _saveFormData: function () { var o = j.find(this.getRoot(), 'div.UIPrivacyWidget_Form'); j.empty(o); var p = {}; if (this._options.useLegacyFormData) { p[this._formDataKey] = this.getData(); } else p[this._formDataKey] = this._getPrivacyData(); k.createHiddenInputs(p, o); } }); f.exports = n; }, null);
__d('TargetedPrivacyModel', ['PrivacyConst', 'TargetedPrivacyConsts'], function a(b, c, d, e, f, g, h, i) { if (c.__markCompiled) c.__markCompiled(); var j = h.BaseValue; function k() { this.value = j.EVERYONE; this.countries = []; this.countries_names = []; this.location_type = i.LOC_ALL; this.location_ids = []; this.location_ids_names = []; this.locales = []; this.locales_names = []; this.gender = i.GENDER_BOTH; this.age_min = 0; this.age_max = 0; return this; } Object.assign(k.prototype, { init: function (l, m, n, o, p, q, r, s, t, u, v, w, x) { this.value = l; this.countries = m.slice(); this.countries_names = n.slice(); this.location_type = o; this.location_ids = p.slice(); this.location_ids_names = q.slice(); this.age_min = r; this.age_max = s; this.gender = t; this.locales = u.slice(); this.locales_names = v.slice(); this.see_regions = x; this.see_cities = w; }, getData: function () { var l = {}; if (this.value == j.EVERYONE) return l; var m = ['countries', 'location_type', 'location_ids', 'age_min', 'age_max', 'gender', 'locales']; for (var n = 0; n < m.length; ++n) { var o = m[n]; l[o] = this[o]; } l.genders = l.gender; return l; } }); f.exports = k; }, null);
__d('UITargetedPrivacyWidget', ['ArbiterMixin', 'AsyncRequest', 'BasePrivacyWidget', 'Dialog', 'MenuSelectableItem', 'PrivacyConst', 'React', 'TargetedPrivacyModel', 'Tooltip', '$', 'classWithMixins', 'fbt', 'mixin'], function a(b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t) { if (c.__markCompiled) c.__markCompiled(); var u, v; u = babelHelpers.inherits(w, r(j, t(h))); v = u && u.prototype; function w(x, y, z, aa, ba, ca, da, ea) { 'use strict'; v.constructor.call(this); var fa = { useLegacyFormData: true }; this.init(y, z, fa, ea); this._profileId = aa; this._model = new o(); this._formDataKey = 'targeted_privacy_data'; this._button = ba; this._everyoneItem = this._retrieveEveryoneItem(x); this._customItem = this._retrieveCustomItem(x); this._defaultTooltip = ca; this._shouldDisplayTooltip = da; w.instances[this._controllerId] = this; this._initMenu(x); this._saveFormData(); } w.prototype._onMenuSelect = function (x, y) { 'use strict'; var z = y.item; if (!z instanceof l) return; var aa = z.getValue(); if (aa == m.BaseValue.EVERYONE) this._model = new o(); this._saveFormData(); this._updateSelector(); this._updateTooltipForButtonFromItem(z); if (this._isCustomSetting(aa)) this._showDialog(); }; w.prototype._updateTooltipForButtonFromItem = function (x) { 'use strict'; if (!this._shouldDisplayTooltip) return; var y = x.getValue(); if (this._isCustomSetting(y)) { p.set(this._button, s._("Custom")); } else p.set(this._button, this._defaultTooltip); }; w.prototype.reset = function () { 'use strict'; this._model = new o(); this._updateSelector(); this._saveFormData(); return this; }; w.prototype.setProfileID = function (x) { 'use strict'; this._profileId = x; }; w.prototype._showDialog = function () { 'use strict'; var x = { controller_id: this._controllerId, profile_id: this._profileId }; this._dialog = new k().setAsync(new i().setURI(w.DIALOG_URI).setData(x)).setModal(true).show(); }; w.prototype._updateSelector = function () { 'use strict'; var x = arguments.length <= 0 || arguments[0] === undefined ? false : arguments[0]; v._updateSelector.call(this); if (x && !this._isCustomSetting(this._model.value)) { this._everyoneItem.select(); this._customItem.deselect(); this._updateTooltipForButtonFromItem(this._everyoneItem); this._menu.inform('change', this._menu.getSelection()); } }; w.prototype._retrieveEveryoneItem = function (x) { 'use strict'; return this._retrieveTargetItem(x, this._isEveryoneSetting); }; w.prototype._retrieveCustomItem = function (x) { 'use strict'; return this._retrieveTargetItem(x, this._isCustomSetting); }; w.prototype._retrieveTargetItem = function (x, y) { 'use strict'; return x._items.find(function (z) { return z instanceof l && y(z.getValue()); }); }; w.getInstance = function (x) { 'use strict'; return this.instances[x]; }; Object.assign(w, { DIALOG_URI: '/ajax/privacy/targeted_privacy_widget_dialog.php', instances: {} }); f.exports = w; }, null);
__d("XPagesShareActorListController", ["XController"], function a(b, c, d, e, f, g) { c.__markCompiled && c.__markCompiled(); f.exports = c("XController").create("\/share\/actors\/", { target_id: { type: "Int", required: true } }); }, null);
__d('ShareActorSelector.react', ['ActorSelector.react', 'AsyncRequest', 'React', 'XPagesShareActorListController'], function a(b, c, d, e, f, g, h, i, j, k) { if (c.__markCompiled) c.__markCompiled(); var l = j.PropTypes, m = 110, n = j.createClass({ displayName: 'ShareActorSelector', propTypes: { onChange: l.func.isRequired, targetID: l.string.isRequired }, getInitialState: function () { return { actorIDs: [], loading: true, selectedActorID: null }; }, componentWillMount: function () { this._fetchActorIDs(); }, render: function () { if (!this.state.actorIDs || !this.state.selectedActorID) return j.createElement('div', null); return (j.createElement(h, { actorIDs: this.state.actorIDs, coverEnabled: false, loading: this.state.loading, onChange: this._onChange, ref: 'selector', selectedActorID: this.state.selectedActorID, showName: true, showNameMaxWidth: m, suppressed: this.state.actorIDs.length === 1 })); }, componentDidUpdate: function (o) { if (this.props.targetID !== o.targetID) this._fetchActorIDs(); }, _fetchActorIDs: function () { this.setState({ loading: true }); var o = k.getURIBuilder().setInt('target_id', this.props.targetID).getURI(); new i().setURI(o).setHandler((function (p) { var q = p.getPayload().actorIDs, r = this.props.targetID; this.setState({ actorIDs: q, loading: false, selectedActorID: r }); this.props.onChange({ value: r }); }).bind(this)).send(); }, _onChange: function (o) { this.setState({ selectedActorID: o.value }); this.props.onChange(o); } }); f.exports = n; }, null);
__d('ShareModePage', ['CSS', 'Input', 'React', 'ReactDOM', 'ShareActorSelector.react', 'ShareMode', 'UITargetedPrivacyWidget'], function a(b, c, d, e, f, g, h, i, j, k, l, m, n) { if (c.__markCompiled) c.__markCompiled(); var o, p; o = babelHelpers.inherits(q, m); p = o && o.prototype; function q(r, s, t, u, v, w) { 'use strict'; p.constructor.call(this, r); this._pageID = w; this._pageSelector = s; this._actorSelectorContainer = t; this._actorIDInput = u; this._defaultActorID = this._actorIDInput.value; this._targetingWidget = v; this._targetingWidgetInstance = null; if (this._pageSelector) this._pageSelector.subscribe('change', (function (x, y) { this._pageID = this._pageSelector.getValue(); this.show(); }).bind(this)); } q.prototype._updateActorIDInput = function () { 'use strict'; i.setValue(this._actorIDInput, this._selectedActorID); }; q.prototype._updateActorSelector = function () { 'use strict'; k.render(j.createElement(l, { onChange: (function (r) { this._selectedActorID = r.value; this.show(); }).bind(this), targetID: this._pageID }), this._actorSelectorContainer); }; q.prototype._updateTargetingWidget = function () { 'use strict'; if (!this._targetingWidgetInstance) this._targetingWidgetInstance = n.getInstance(this._targetingWidget.id); if (this._targetingWidgetInstance) this._targetingWidgetInstance.setProfileID(this._selectedActorID); h.conditionShow(this._targetingWidget, this._pageID === i.getValue(this._actorIDInput, this._selectedActorID)); }; q.prototype.show = function () { 'use strict'; this._updateActorSelector(); this._updateActorIDInput(); this._updateTargetingWidget(); }; q.prototype.hide = function () { 'use strict'; i.setValue(this._actorIDInput, this._defaultActorID); h.hide(this._targetingWidget); }; f.exports = q; }, null);