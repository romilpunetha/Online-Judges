/*!CK:1232562448!*//*1451877592,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["0VJ03"]); }

__d("BirthdayRemindersCounterEvent",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={OPEN_MODAL:"open_modal",PHOTO_FLOW_WITHOUT_PERSONALIZED:"photo_flow_without_personalized",PHOTO_FLOW_WITH_PERSONALIZED:"photo_flow_with_personalized",ADD_PERSONALIZED_PHOTO:"add_personalized_photo",CLICK_ALBUM:"click_album",ADD_ALBUM_PHOTO:"add_album_photo",SELFIE_FLOW:"selfie_flow",ADD_SELFIE:"add_selfie",ADD_UPLOADED:"add_uploaded",POST_WITH_PHOTO:"post_with_photo",POST_WITHOUT_PHOTO:"post_without_photo",POST_NON_SCHEDULED:"post_non_scheduled",POST_SCHEDULED:"post_scheduled",CANCEL_SCHEDULED_MODAL:"cancel_scheduled_modal",CANCEL_SCHEDULED_TIMELINE:"cancel_scheduled_timeline"};},null);
__d("ComposerNUXType",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={CAMERA_NUX:"camera_nux_seen",ADD_MORE_NUX:"add_more_nux_seen",OGCOMPOSER_NUX:"ogcomposer_nux_seen",FACEREC_SUGGESTIONS_NUX:"facerec_suggestions_nux_seen",TAGGING_FLYOUT_NUX:"tagging_flyout_nux_seen",OGCOMPOSER_NEW_ICON_PICKER_NUX:"minutiae_icon_picker_nux_seen",SHARER_MINUTIAE_NUX:"sharer_minutiae_nux_seen",ADD_STICKERS_NUX:"add_stickers_nux_seen",UPCOMING_BIRTHDAYS_NUX:"upcoming_birthdays_nux_seen",CROSS_POST_NUX:"cross_post_nux_seen",SLIDESHOW_NUX:"slideshow_nux_seen"};},null);
__d('GoodwillThrowbackBanzaiLogger',['BanzaiLogger'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();i.prototype.logShareEvent=function(j,k){'use strict';var l=this;j.onclick=function(){l.logEvent(k.event,k);};};i.prototype.logClickEvent=function(j,k){'use strict';var l=this;j.onclick=function(){l.logEvent(k.event,k);};};i.prototype.logEvent=function(event,j){'use strict';var k=babelHelpers._extends({event:event},j);h.log('GoodwillThrowbackProductLoggerConfig',k);};function i(){'use strict';}f.exports=new i();},null);
__d('GoodwillThrowbackPermalink',['Arbiter','CSS','DOM','Run','SubscriptionsHandler','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();function n(o,p){'use strict';if(!o||!p)return;var q=new l();q.addSubscriptions(h.subscribe('Story/delete',function(r,s){if(s===p){q.release();var t=o.previousElementSibling,u=o.nextElementSibling;j.remove(o);var v="_3aqd",w="_5w1k";if(i.hasClass(t,v))if(i.hasClass(u,v)||i.hasClass(u,w))j.remove(t);}}));k.onLeave(q.release.bind(q));}f.exports=n;},null);
__d("XBirthdayRemindersCounterController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/birthday\/reminder\/counter\/",{event:{type:"Enum",required:true,enumType:1}});},null);
__d('BirthdayRemindersCounter',['AsyncSignal','XBirthdayRemindersCounterController'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={logEvent:function(event){var k=i.getURIBuilder().setEnum('event',event).getURI();new h(k).send();}};f.exports=j;},null);
__d("XBirthdayRemindersCameraPreviewController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/birthday\/reminder\/camera\/preview\/",{photo_fbid:{type:"Int",required:true},target_id:{type:"Int",required:true}});},null);
__d('BirthdayModal',['AsyncRequest','BirthdayRemindersCounter','BirthdayRemindersCounterEvent','BirthdaysReminder','Button','ComposerNUXType','ComposerXNUX','CSS','DataStore','DOM','Event','FileInputUploader','Focus','Layer','Parent','XBirthdayRemindersCameraPreviewController','csx','cx','focusWithinLayer','getActiveElement','goURI','setImmediate'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca){if(c.__markCompiled)c.__markCompiled();var da=null,ea={},fa={},ga,ha={},ia={},ja={init:function(ka,la,ma,na){if(!fa.hasOwnProperty(na))fa[na]=ma;ha[na]=ka;ia[na]=la;r.listen(ka,'click',(function(oa){i.logEvent(j.OPEN_MODAL);ma.show();}).bind(this));},initAsyncDialog:function(ka,la){fa[la]=ka;ca(function(){aa().blur();z(ka.getRoot());});},addComposers:function(ka,la,ma){if(ma===k.LayoutTypes.MULTIPLE){var na=ma.concat(la);if(!ea.hasOwnProperty(na))ea[na]=ka;this._addComposer(q.find(ka,"._5j0b"),la,ma);}else{if(!la||la!==da)ea={};da=la;for(var oa in ka)if(ka.hasOwnProperty(oa))this._addComposer(q.find(ka[oa],"._5j0b"),oa,ma);}},_showInput:function(ka){var la=q.scry(ka,"._u48").pop();if(!la)return;var ma=q.find(ka,"._4ovy"),na=q.find(ma,'.inlineReplyTextArea');o.hide(la);o.show(ma);t.set(na);},_addComposer:function(ka,la,ma){var na=ma.concat(la);ea[na]=ka;var oa=q.scry(ka,"._4ovw").pop();if(!oa)return;var pa=this;['click','focus'].forEach(function(ra){r.listen(oa,ra,function(event){var sa=event.getTarget();if(v.bySelector(sa,"._260q"))return;pa._showInput(ka);});});var qa=q.find(ka,"._4ow2");this._addRemoveButton(qa,la,na);return true;},addUpcomingBirthdays:function(ka,la){r.listen(la.firstChild,'click',function(event){o.show(ka);o.hide(la);});},attachPhoto:function(ka,la,ma,na){var oa=na.concat(ma),pa=ea[oa];if(!pa)return;var qa=q.find(pa,"._4ovz");o.removeClass(qa,"._4ow0");var ra=q.find(pa,"._4ow1");ra.appendChild(la);q.appendContent(qa,ka);var sa=q.find(pa,"._4ow2");o.show(sa);this._showInput(pa);var ta=q.find(pa,"._30e4");l.setEnabled(ta,true);},initUploader:function(ka,la,ma,na,oa){var pa=ka.getInput();ka.subscribe('change',this._uploadPhoto.bind(this,pa,na,ma,oa));},_uploadPhoto:function(ka,la,ma,na){var oa=na.concat(ma),pa=ea[oa];if(!pa)return;i.logEvent(j.ADD_UPLOADED);this._showInput(pa);var qa=q.find(pa,"._4ow3"),ra=q.find(pa,"._4ow4");o.show(qa);o.hide(ra);var sa=new s(ka);sa.setURI(la.uploadURI).setData(la.uploadData).setAllowCrossOrigin(true).setUploadInParallel(true).setFiles({file:ka.files[0]}).send();var ta=q.find(pa,"._30e4");l.setEnabled(ta,false);var ua=u.getTopmostLayer();if(ua)ua.hide();},getCameraPreview:function(ka,la){var ma=k.LayoutTypes.SINGLETON.concat(la),na=ea[ma];if(!na)return;i.logEvent(j.ADD_SELFIE);this._showInput(na);var oa=q.find(na,"._4ow3"),pa=q.find(na,"._4ow4");o.show(oa);o.hide(pa);var qa=w.getURIBuilder().setInt('target_id',la).setInt('photo_fbid',ka).setString('singleton',k.LayoutTypes.SINGLETON).getURI();new h(qa).send();var ra=q.find(na,"._30e4");l.setEnabled(ra,false);},showPhotoPicker:function(ka,la){ka.subscribeOnce(['show'],(function(){o.addClass(fa[la].getContentRoot(),"_30e3");}).bind(this));ka.subscribeOnce(['hide'],(function(){fa[la].show();o.removeClass(fa[la].getContentRoot(),"_30e3");}).bind(this));},addPhotoItem:function(ka,la,ma,na,oa,pa){var qa=pa.concat(na),ra=ea[qa];if(!ra)return;r.listen(ka,'click',(function(){i.logEvent(oa);var sa=q.find(ra,"._4ow3"),ta=q.find(ra,"._4ovz"),ua=q.find(ra,"._4ow4");o.show(sa);o.hide(ua);o.removeClass(ta,"._4ow0");var va=q.find(ra,"._4ow1");va.appendChild(ma);q.appendContent(ta,la);var wa=q.find(ra,"._4ow2");o.show(wa);this._showInput(ra);var xa=u.getTopmostLayer();if(xa)xa.hide();}).bind(this));},_addRemoveButton:function(ka,la,ma){var na=ea[ma];if(!na)return;r.listen(ka,'click',(function(oa){oa.kill();o.hide(ka);var pa=q.find(na,"._4ow3"),qa=q.find(na,"._4ovz"),ra=q.find(na,"._4ow4");o.hide(pa);o.show(ra);o.addClass(qa,"._4ow0");if(qa.firstChild)q.remove(qa.firstChild);q.scry(na,"._4ow5").forEach(function(sa){q.remove(sa);});}).bind(this));},_resetComposer:function(ka){var la=q.find(ka,"._4ow2");la.click();var ma=q.find(ka,".uiMentionsInput");p.get(ma,'MentionsInput').reset();},finishPosting:function(ka,la,ma,na){if(ma)return ba(window.location.href,true);var oa=na.concat(la),pa=ea[oa];if(!pa)return;this._resetComposer(pa);o.addClass(pa,"_4dgh");if(na===k.LayoutTypes.MULTIPLE){o.addClass(ha[oa],"_1exi");o.addClass(ia[oa],"_1exj");}},cancelScheduled:function(ka,la){if(la!=='modal')return ba(window.location.href,true);var ma=k.LayoutTypes.SINGLETON.concat(ka),na=ea[ma];if(!na)return;o.removeClass(na,"_4dgh");},setPhotoAlbumView:function(ka){ga=ka;},setPhotoView:function(ka){if(!ga)return;var la=q.find(ga,"._5r32");if(la){o.hide(la);}else return;var ma=q.find(ga,"._375u");ma.appendChild(ka);var na=q.find(ka,"._375v");r.listen(na,'click',(function(){o.show(la);var oa=q.find(ga,"._375w");q.remove(oa);}).bind(this));},attachFlyout:function(ka){var la=ka.getContext(),ma=q.find(ka.getContentRoot(),"._21xo"),na=q.scry(ka.getContentRoot(),"._15p7").pop(),oa=function(){o.conditionClass(la,"_21xn",ka.isShown());};oa();ka.subscribe(['show','hide'],oa);r.listen(la,'click',function(pa){ka.conditionShow(!ka.isShown());pa.kill();});r.listen(ma,'click',function(){ka.hide();});if(na)r.listen(na,'click',function(){ka.hide();});},initMegaphone:function(ka,la){r.listen(la,'click',function(){q.remove(ka);n.sendMarkSeenRequest(m.UPCOMING_BIRTHDAYS_NUX);});},registerBirthdayPostHandler:function(ka,la,ma){r.listen(ka,'submit',function(event,na){var oa,pa;oa=v.byClass(ka,la);if(oa)for(pa=oa.nextSibling;pa;pa=pa.nextSibling){var qa=q.scry(pa,ma);if(qa.length>0){ja._showInput(pa);break;}}return true;});}};f.exports=ja;},null);