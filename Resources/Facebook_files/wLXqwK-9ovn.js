/*!CK:2656731417!*//*1453322012,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["y0g0O"]); }

__d('ReactComposerAudienceActions', ['ReactComposerAudienceActionTypes', 'ReactComposerDispatcher', 'ReactComposerAudienceStore'], function a(b, c, d, e, f, g, h, i) { if (c.__markCompiled) c.__markCompiled(); c('ReactComposerAudienceStore'); var j = { setAudience: function (k, l, m) { i.dispatch({ composerID: k, type: h.SET_AUDIENCE, audience: l, legacyAudience: m }); }, setAudienceElement: function (k, l) { i.dispatch({ composerID: k, type: h.SET_AUDIENCE_ELEMENT, audienceElement: l }); }, setAudienceInstance: function (k, l) { i.dispatch({ composerID: k, type: h.SET_AUDIENCE_INSTANCE, audienceInstance: l }); }, setPrivacyxNullDangerous: function (k, l) { i.dispatch({ composerID: k, type: h.SET_PRIVACYX_NULL_DANGEROUS, privacyxNullDangerous: l }); } }; f.exports = j; }, null);
__d('ReactComposerAudienceAlignment', ['ReactComposerActions', 'ReactComposerEvents', 'ReactComposerStatusStore', 'ReactComposerAudienceStore', 'ReactComposerAudienceActions', 'Arbiter', 'AsyncRequest', 'AudienceSelector', 'ContextualDialog', 'CSS', 'cx', 'DialogExpansion', 'DOM', 'Event', 'Focus', 'Keys', 'ModalMask', 'PrivacyConst', 'SelectorDeprecated', 'Style', 'XPrivacyAudienceAlignmentLoggingController', 'csx', 'curry', 'ge'], function a(b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, aa, ba, ca, da, ea) { if (c.__markCompiled) c.__markCompiled(); var fa = false, ga, ha, ia, ja = 200; function ka(ob, pb) { ob.setContext(pb); ob.show(); } function la(ob, pb) { var qb = aa.get(pb.getContentRoot(), 'margin-top'); ob.setWidth(this.aaa_dialog_width); ob.show(); aa.set(ob.getContentRoot(), 'margin-top', qb); } var ma = 'wwwtux', na = 'onlyme-wwwtux', oa = 'exposed', pa = 'public_sticky', qa = 'friends_sticky', ra = 'only_me_sticky', sa = 'custom_selection', ta = 'selector', ua = 'holdout', va = 'dismissal', wa = 'learn_more', xa = 'blur', ya = 'posted'; function za(ob, event, pb) { var qb = ba.getURIBuilder().setEnum('product', ob).setEnum('event', event).setInt('client_time', Date.now()); ia && qb.setFloat('shown_duration', (Date.now() - ia) / 1000); pb && qb.setInt('value', pb); var rb = new n().setURI(qb.getURI()); rb.send(); } function ab(ob, pb, qb, rb, sb) { if (fa) return false; if (j.hasText(qb)) return false; if (!rb) return false; var tb = null; if (sb) { tb = sb.getSelectedBaseValue(); } else tb = parseInt(z.getValue(rb), 10); return tb === ob; } function bb() { var ob = t.scry(document.body, '#pagelet_timeline_recent'); if (ob.length >= 1) { var pb = t.scry(ob[0], 'li.fbTimelineComposerCapsule'); if (pb.length >= 1) return pb[0]; } return null; } function cb(ob, pb, qb, rb) { var sb; if (rb) { sb = rb.getMenuElement(); } else { var tb = t.find(qb, 'div.audienceSelector'); sb = t.scry(tb, 'div.wrap'); } if (sb.length < 1) return; var ub = bb(), vb; if (rb) { rb.subscribeOnce('open', function () { if (ub) q.addClass(ub, "_2wc-"); p.setContext(pb, sb); pb.show(); }); } else vb = z.listen(tb, 'open', function () { var yb = t.scry(sb[0], 'div.uiSelectorMenuWrapper'); if (yb.length > 0) { if (ub) q.addClass(ub, "_2wc-"); p.setContext(pb, yb[0]); pb.setOffsetX(12); pb.show(); } else x.hide(); z.unsubscribe(vb); }); if (rb) { rb.getPopover().subscribeOnce('hide', function () { db(pb, sb, ub, ob); }); } else var wb = z.listen(tb, 'close', function () { db(pb, sb[0], ub, ob); z.unsubscribe(wb); }); if (rb) { q.addClass(sb, "_35mn"); var xb = rb.getTriggerButtonElement(); q.addClass(xb, "_35mn"); } else q.addClass(sb[0], "_35mn"); setTimeout(function () { x.show(); aa.set(x.getNode(), 'opacity', '0.3'); aa.set(x.getNode(), 'background-color', 'rgb(0,0,0)'); if (rb) { rb.openSelectorExpanded(); } else z.toggle(tb); }, 20); } function db(ob, pb, qb, rb) { x.hide(); ob.hide(); q.removeClass(pb, "_35mn"); if (qb) q.removeClass(qb, "_2wc-"); eb(rb); } function eb(ob) { var pb = t.scry(ob, "._5yk2").pop(); pb && v.set(pb); } function fb(ob, pb, qb, rb) { ob.unsubscribe(ha); ob.hide(); eb(qb); m.subscribeOnce(i.POST_STARTED + pb, function () { za(rb, ya); }); } function gb(ob) { return k.getAudienceElement(ob); } function hb(ob) { return k.getAudienceInstance(ob); } function ib(ob, pb, qb, rb, sb, tb) { var ub = gb(ob), vb = hb(ob), wb = lb(rb), xb = kb(rb); if (wb === null || !xb) return; fb(qb, ob, pb, tb); if (vb) { vb.selectOption(wb); } else o.setAudience(pb, rb); l.setAudience(ob, wb, rb); ka(sb, ub); za(tb, xb); } function jb(ob) { switch (ob) { case y.BaseValue.EVERYONE: return ma; case y.BaseValue.SELF: return na; default: return null; } } function kb(ob) { switch (ob) { case y.BaseValue.EVERYONE: return pa; case y.BaseValue.ALL_FRIENDS: return qa; case y.BaseValue.SELF: return ra; default: return null; } } function lb(ob) { switch (ob) { case y.BaseValue.EVERYONE: return y.PostParam.EVERYONE; case y.BaseValue.ALL_FRIENDS: return y.PostParam.FRIENDS; case y.BaseValue.SELF: return y.PostParam.ONLY_ME; default: return null; } } function mb(ob, pb, qb, rb, sb, tb, ub) { var vb = k.getAudienceElement(tb) != null; if (!vb) { setTimeout(function () { return mb(ob, pb, qb, rb, sb, tb, ub); }, ja); return; } var wb = gb(tb), xb = hb(tb); if (ab(ob, qb, tb, wb, xb)) { ia = Date.now(); if (pb) { za(ub, ua); } else { za(ub, oa); setTimeout(function () { rb.show(); var yb = sb.parentElement; this.aaa_dialog_width = rb.getWidth() + yb.offsetWidth - 490; var zb = new s(rb); zb.setTargetWidth(this.aaa_dialog_width); zb._onAfterShow(); v.set(rb.getRoot()); }, 100); } } } var nb = { abort: function () { fa = true; }, startOnComposerFocus: function (ob, pb, qb, rb, sb, tb, ub, vb, wb, xb, yb, zb, ac, bc, cc, dc, ec, fc) { var gc = ea(fc); if (!gc) return; var hc = jb(ob); if (!hc) return; m.subscribeOnce(i.MENTION_INPUT_FOCUS + fc, function () { mb(ob, pb, gc, qb, yb, fc, hc); }); u.listen(yb, 'click', da(ib, fc, gc, qb, xb, rb, hc)); u.listen(ac, 'click', da(ib, fc, gc, qb, zb, sb, hc)); u.listen(bc, 'click', function () { qb.subscribe('hide', function () { var ic = gb(fc), jc = hb(fc); if (jc) jc.subscribeOnce('changed', function (event, kc) { za(hc, sa, kc.base_value); }); if (tb) cb(gc, tb, ic, jc); }); fb(qb, fc, gc, hc); za(hc, ta); }); if (cc) u.listen(cc, 'click', function () { var ic = gb(fc); fb(qb, fc, gc, hc); za(hc, va); if (ub) ka(ub, ic); }); ha = qb.subscribe('hide', function () { var ic = gb(fc); eb(gc); za(hc, va); if (vb) ka(vb, ic); }); ga = qb.subscribe('blur', function () { za(hc, xa); }); u.listen(dc, 'click', function (event) { la(wb, qb); za(hc, wa); }); u.listen(ec, 'click', function (event) { wb.hide(); }); if (cc) u.listen(wb.getRoot(), 'keydown', function (event) { if (u.getKeyCode(event) === w.ESC) { wb.hide(); u.kill(event); } }); } }; f.exports = nb; }, null);